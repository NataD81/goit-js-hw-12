{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst pixUrl = 'https://pixabay.com/api/';\nconst apiKey = '44048245-ca045a99f6e49609e4580f957';\nconst perPage = 15;\n\nexport async function findImg(query, page) {\n  const params = {\n    key: apiKey,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: perPage\n  };\n\n  const response = await axios.get(pixUrl, { params });\n  if (response.status !== 200) {\n    throw new Error(response.statusText);\n  }\n\n  return response.data;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nlet lightbox;\n\nexport function createImg(image) {\n  return `<li class=\"card\">\n    <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n    </a>\n    <div class=\"card-info\">\n        <p class=\"description\"><b>Likes:</b> ${image.likes}</p>\n        <p class=\"description\"><b>Views:</b> ${image.views}</p>\n        <p class=\"description\"><b>Comments:</b> ${image.comments}</p>\n        <p class=\"description\"><b>Downloads:</b> ${image.downloads}</p>\n    </div>\n  </li>`;\n}\n\nexport function downLoadImg(arr) {\n  return arr.map(createImg).join('');\n}\n\nexport function imgGallery() {\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function showLoading(loader) {\n  loader.style.display = 'block';\n//   iziToast.info({\n//     message: 'Loading images, please wait...',\n//     position: 'bottomCenter',\n//     timeout: 1000,\n//   });\n}\n\nexport function hideLoading(loader) {\n  loader.style.display = 'none';\n}\n\nexport function showLoadMoreBtn(button) {\n  button.style.display = 'block';\n}\n\nexport function hideLoadMoreBtn(button) {\n  button.style.display = 'none';\n}\n\nexport function showError(error) {\n  iziToast.error({\n    message: `An error occurred: ${error}. Please try again later.`,\n    position: 'topRight',\n  });\n}\n\nexport function showEndOfResults() {\n  iziToast.info({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n  });\n}\n","import { findImg } from './js/pixabay-api';\nimport {\n  downLoadImg,\n  imgGallery,\n  showLoading,\n  hideLoading,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n  showError,\n  showEndOfResults\n} from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\"#loading\");\nconst loadMoreBtn = document.querySelector(\"#load-more\");\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\n\nhideLoadMoreBtn(loadMoreBtn);\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  query = event.target.request.value.trim();\n  page = 1;\n\n  if (!query) return;\n\n  showLoading(loader);\n  hideLoadMoreBtn(loadMoreBtn);\n\n  try {\n    const data = await findImg(query, page);\n    totalHits = data.totalHits; \n    handleImages(data);\n  } catch (error) {\n    showError(error.message);\n  } finally {\n    form.reset();\n    hideLoading(loader);\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  showLoading(loader);\n  page += 1;\n\n  try {\n    const data = await findImg(query, page);\n    handleImages(data);\n  } catch (error) {\n    showError(error);\n  } finally {\n    hideLoading(loader);\n  }\n});\n\nfunction handleImages(data) {\n  if (data.hits.length === 0) {\n    iziToast.error({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  const markup = downLoadImg(data.hits);\n  gallery.insertAdjacentHTML('beforeend', markup);\n  imgGallery();\n\n\n  const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n\n  \n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n\n  if (gallery.children.length < totalHits) {\n    showLoadMoreBtn(loadMoreBtn);\n  } else {\n    hideLoadMoreBtn(loadMoreBtn);\n    showEndOfResults();\n  }\n}"],"names":["pixUrl","apiKey","perPage","findImg","query","page","params","response","axios","lightbox","createImg","image","downLoadImg","arr","imgGallery","SimpleLightbox","showLoading","loader","hideLoading","showLoadMoreBtn","button","hideLoadMoreBtn","showError","error","iziToast","showEndOfResults","form","gallery","loadMoreBtn","totalHits","event","data","handleImages","markup","cardHeight"],"mappings":"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"}